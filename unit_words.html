<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oxford Living English (6A) - Vocabulary Learning</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-color: #1cb0f6;
            --secondary-color: #58cc02;
            --accent-color: #ff9f00;
            --danger-color: #ff6b6b;
            --light-color: #FFFFFF;
            --dark-color: #333333;
            --gray-color: #F5F5F5;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --border-radius: 12px;
            --card-bg: #FFFFFF;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e6ecf5 100%);
            color: var(--dark-color);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: var(--light-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color) 0%, #0d8ccb 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .logo {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .logo-icon {
            background-color: white;
            color: var(--primary-color);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        
               
        .tagline {
            font-size: 18px;
            opacity: 0.9;
            margin-top: 10px;
            font-weight: 500;
        }
        
        .progress-summary {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: linear-gradient(135deg, #f0f7ff 0%, #e3eeff 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 30px;
            border-left: 6px solid var(--primary-color);
        }
        
        .progress-text h3 {
            color: var(--primary-color);
            font-size: 22px;
            margin-bottom: 10px;
        }
        
        .progress-text p {
            color: #666;
            font-size: 16px;
        }
        
        .progress-stats {
            text-align: right;
        }
        
        .progress-percentage {
            font-size: 48px;
            font-weight: 800;
            color: var(--secondary-color);
            line-height: 1;
            text-shadow: 0 2px 4px rgba(88, 204, 2, 0.2);
        }
        
        .progress-label {
            font-size: 16px;
            color: #666;
            font-weight: 600;
        }
        
        .progress-bar-container {
            margin-top: 15px;
        }
        
        .progress-bar {
            height: 12px;
            background-color: #e9ecef;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary-color) 0%, #7ee043 100%);
            border-radius: 6px;
            transition: width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 2px 8px rgba(88, 204, 2, 0.3);
        }
        
        .units-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            padding: 0 30px 30px;
            flex-wrap: wrap;
        }
        
        .unit-btn {
            background: linear-gradient(135deg, #e3eeff 0%, #d6e4ff 100%);
            border: none;
            border-radius: var(--border-radius);
            padding: 20px 30px;
            font-size: 20px;
            font-weight: 700;
            color: var(--primary-color);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            min-width: 140px;
            box-shadow: var(--shadow);
        }
        
        .unit-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .unit-btn.active {
            background: linear-gradient(135deg, var(--primary-color) 0%, #0d8ccb 100%);
            color: white;
            box-shadow: 0 6px 18px rgba(28, 176, 246, 0.3);
        }
        
        .unit-btn.completed {
            background: linear-gradient(135deg, var(--secondary-color) 0%, #4db500 100%);
            color: white;
        }
        
        .unit-icon {
            font-size: 32px;
        }
        
        .main-content {
            padding: 0 30px 30px;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        .content-section {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--shadow);
        }
        
        .section-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            padding-bottom: 15px;
            border-bottom: 3px solid #f0f0f0;
        }
        
        .section-title i {
            color: var(--primary-color);
        }
        
        .word-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .word-item {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
        }
        
        .word-item:hover {
            transform: translateY(-8px);
            border-color: var(--primary-color);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .word-text {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--dark-color);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .word-meaning {
            font-size: 16px;
            color: #666;
            margin-bottom: 20px;
            line-height: 1.6;
            font-style: italic;
            flex-grow: 1;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
        }
        
        .word-buttons {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }
        
        .speak-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 20px;
            font-size: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
            font-weight: 600;
            flex: 1;
        }
        
        .speak-btn:hover {
            background-color: #0D8BF0;
            transform: translateY(-2px);
        }
        
        .speak-btn.sentence-btn {
            background-color: var(--accent-color);
        }
        
        .speak-btn.sentence-btn:hover {
            background-color: #e68a00;
        }
        
        .exercise-container {
            margin-top: 30px;
        }
        
        .exercise-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .exercise-instruction {
            font-size: 18px;
            color: #666;
            margin-bottom: 25px;
            padding: 15px;
            background-color: #f0f7ff;
            border-radius: var(--border-radius);
            line-height: 1.6;
        }
        
        .exercise-content {
            background-color: #f9f9f9;
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 30px;
        }
        
        .exercise-text {
            font-size: 20px;
            line-height: 1.8;
            margin-bottom: 25px;
        }
        
        .blank {
            display: inline-block;
            min-width: 150px;
            border-bottom: 2px dashed var(--accent-color);
            margin: 0 8px;
            text-align: center;
            color: transparent;
            position: relative;
            height: 40px;
            vertical-align: middle;
        }
        
        .blank.has-answer {
            color: var(--dark-color);
            font-weight: 600;
            border-bottom: 2px solid var(--primary-color);
        }
        
        .blank-number {
            position: absolute;
            top: -25px;
            left: 5px;
            font-size: 14px;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .word-options-container {
            margin-top: 30px;
        }
        
        .word-options-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--secondary-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .word-options {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .word-option {
            background-color: white;
            border: 2px solid var(--secondary-color);
            border-radius: 25px;
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: var(--secondary-color);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .word-option:hover {
            background-color: var(--secondary-color);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .word-option.used {
            opacity: 0.4;
            cursor: not-allowed;
            text-decoration: line-through;
            transform: none;
            box-shadow: none;
        }
        
        .word-option.used:hover {
            background-color: white;
            color: var(--secondary-color);
        }
        
        .exercise-result {
            margin-top: 25px;
            padding: 20px;
            border-radius: var(--border-radius);
            font-weight: 600;
            display: none;
        }
        
        .exercise-result.correct {
            background-color: #E8F5E9;
            color: #2E7D32;
            display: block;
            border-left: 4px solid var(--secondary-color);
        }
        
        .exercise-result.incorrect {
            background-color: #FFEBEE;
            color: #C62828;
            display: block;
            border-left: 4px solid var(--danger-color);
        }
        
        .exercise-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .exercise-btn {
            background: linear-gradient(135deg, var(--primary-color) 0%, #0d8ccb 100%);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 15px 30px;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
            font-weight: 600;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }
        
        .exercise-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 12px rgba(0,0,0,0.15);
        }
        
        .exercise-btn.reset-btn {
            background: linear-gradient(135deg, var(--danger-color) 0%, #ff5252 100%);
        }
        
        .voice-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
            padding: 15px;
            background-color: #E3F2FD;
            border-radius: var(--border-radius);
            flex-wrap: wrap;
        }
        
        .voice-selector label {
            font-weight: 600;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .voice-selector select {
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid #BBDEFB;
            background-color: white;
            font-size: 14px;
            min-width: 250px;
            color: var(--dark-color);
        }
        
        .footer {
            text-align: center;
            padding: 30px;
            background-color: #f8f9fa;
            border-top: 2px solid #e9ecef;
            margin-top: 30px;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
        }
        
        .footer-text {
            color: #666;
            font-size: 16px;
        }
        
        /* Unit-specific exercise styling */
        .poem-exercise {
            font-family: 'Georgia', serif;
            font-style: italic;
            line-height: 2;
            padding: 25px;
            background-color: #fdf6e3;
            border-radius: var(--border-radius);
            border-left: 5px solid #ff9f00;
        }
        
        /* Riddle styles */
        .riddle-container {
            background-color: #f0f7ff;
            padding: 25px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        
        .riddle {
            font-size: 20px;
            font-style: italic;
            margin-bottom: 20px;
            color: #333;
            font-weight: 600;
        }
        
        .riddle-answer {
            display: none;
            padding: 15px;
            background-color: white;
            border-radius: 10px;
            margin-top: 15px;
            font-weight: bold;
            color: var(--secondary-color);
            border-left: 4px solid var(--secondary-color);
            animation: fadeIn 0.5s ease;
        }
        
        .riddle-answer.show {
            display: block;
        }
        
        .riddle-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .riddle-btn:hover {
            background-color: #0d8ccb;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .word-list {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
            
            .units-container {
                gap: 10px;
            }
            
            .unit-btn {
                min-width: 120px;
                padding: 15px 20px;
                font-size: 18px;
            }
        }
        
        @media (max-width: 768px) {
            header {
                padding: 20px;
            }
            
            .logo-text {
                font-size: 32px;
            }
            
            .progress-summary {
                flex-direction: column;
                align-items: flex-start;
                gap: 20px;
                margin: 20px;
            }
            
            .progress-stats {
                text-align: left;
                width: 100%;
            }
            
            .units-container {
                padding: 0 20px 20px;
            }
            
            .unit-btn {
                min-width: 100px;
                padding: 12px 15px;
                font-size: 16px;
            }
            
            .main-content {
                padding: 0 20px 20px;
            }
            
            .content-section {
                padding: 20px;
            }
            
            .word-list {
                grid-template-columns: 1fr;
            }
            
            .word-options {
                justify-content: center;
            }
            
            .voice-selector {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .voice-selector select {
                width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            .logo-text {
                font-size: 24px;
            }
            
            .unit-btn {
                min-width: 80px;
                padding: 10px;
                font-size: 14px;
            }
            
            .word-text {
                font-size: 18px;
            }
        
            .section-title {
                font-size: 22px;
            }
            
            .exercise-text {
                font-size: 16px;
            }
            
            .blank {
                min-width: 100px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon"><img src="logo.jpg"></img></div>
                <div class="logo-text">Oxford Living English (6A) - Vocabulary Learning</div>
            </div>
            
            <div class="progress-summary">
                <div class="progress-text">
                    <h3>Your Learning Progress</h3>
                    <p>Complete units to expand your vocabulary skills</p>
                    <div class="progress-bar-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                    </div>
                </div>
                <div class="progress-stats">
                    <div class="progress-percentage" id="progressPercentage">0%</div>
                    <div class="progress-label">Completed</div>
                </div>
            </div>
        </header>
        
        <div class="units-container" id="unitsContainer">
            <button class="unit-btn" data-unit="1">
                <i class="fas fa-hands-helping unit-icon"></i>
                <span>Unit 1</span>
            </button>
            <button class="unit-btn" data-unit="2">
                <i class="fas fa-exclamation-triangle unit-icon"></i>
                <span>Unit 2</span>
            </button>
            <button class="unit-btn" data-unit="3">
                <i class="fas fa-utensils unit-icon"></i>
                <span>Unit 3</span>
            </button>
            <button class="unit-btn" data-unit="4">
                <i class="fas fa-film unit-icon"></i>
                <span>Unit 4</span>
            </button>
            <button class="unit-btn" data-unit="5">
                <i class="fas fa-suitcase-rolling unit-icon"></i>
                <span>Unit 5</span>
            </button>
            <button class="unit-btn" data-unit="6">
                <i class="fas fa-globe-americas unit-icon"></i>
                <span>Unit 6</span>
            </button>
        </div>
        
        <div class="main-content">
            <!-- Unit 1 Content -->
            <div class="content-section unit-content" id="unit1-content" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-hands-helping"></i>
                    Unit 1: Charity Work
                </div>
                
                <div class="word-list" id="unit1-word-list">
                    <!-- Word list will be populated by JavaScript -->
                </div>
                
                <div class="exercise-container">
                    <div class="exercise-title">
                        <i class="fas fa-edit"></i>
                        Exercise: Complete the Poster
                    </div>
                    
                    <div class="exercise-instruction">
                        Alex is making a poster about different ways of helping others. Complete the poster by filling in the blanks with the correct words from the word list.
                    </div>
                    
                    <div class="exercise-content">
                        <div class="exercise-text" id="unit1-exercise-text">
                            Would you like to give a helping hand? There are a lot of ways to do this!<br><br>
                            
                            Are you good at talking to people? You can <span class="blank" id="blank1-1">__________<span class="blank-number">1</span></span> and spend some time with the old people there.<br><br>
                            
                            Do you love animals? <span class="blank" id="blank1-2">__________<span class="blank-number">2</span></span> from an animal charity and give it a warm and safe home.<br><br>
                            
                            Do you enjoy walking? You can <span class="blank" id="blank1-3">__________<span class="blank-number">3</span></span> to raise money.<br><br>
                            
                            Do you want to have fun and help people at the same time? You can <span class="blank" id="blank1-4">__________<span class="blank-number">4</span></span>.<br><br>
                            
                            Some charities hold a flag day every year. You can be a volunteer to help <span class="blank" id="blank1-5">__________<span class="blank-number">5</span></span>.<br><br>
                            
                            Other charities <span class="blank" id="blank1-6">__________<span class="blank-number">6</span></span> to raise money. You can buy some to help others. You may even have a chance to win something! You can also <span class="blank" id="blank1-7">__________<span class="blank-number">7</span></span> to your favourite charity directly.<br><br>
                            
                            Even just a few dollars can make a difference! There are many different charities which need your help. Reach out and try to <span class="blank" id="blank1-8">__________<span class="blank-number">8</span></span> for them.<br><br>
                            
                            You will feel very happy when you help people in need!
                        </div>
                        
                        <div class="word-options-container">
                            <div class="word-options-title">
                                <i class="fas fa-list"></i> Word Options:
                            </div>
                            <div class="word-options" id="unit1-word-options">
                                <!-- Word options will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <div class="exercise-result" id="unit1-result"></div>
                        
                        <div class="exercise-buttons">
                            <button class="exercise-btn" id="unit1-check-btn">
                                <i class="fas fa-check-circle"></i> Check Answers
                            </button>
                            <button class="exercise-btn reset-btn" id="unit1-reset-btn">
                                <i class="fas fa-redo"></i> Reset Exercise
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="voice-selector">
                    <label for="voice-select"><i class="fas fa-volume-up"></i> Voice:</label>
                    <select id="voice-select">
                        <option value="">Loading voices...</option>
                    </select>
                </div>
            </div>
            
            <!-- Unit 2 Content -->
            <div class="content-section unit-content" id="unit2-content" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-exclamation-triangle"></i>
                    Unit 2: Natural Disasters
                </div>
                
                <div class="word-list" id="unit2-word-list">
                    <!-- Word list will be populated by JavaScript -->
                </div>
                
                <div class="exercise-container">
                    <div class="exercise-title">
                        <i class="fas fa-edit"></i>
                        Exercise: Complete the Web Page
                    </div>
                    
                    <div class="exercise-instruction">
                        Helen is reading a web page about what happens in natural disasters. Complete the web page by filling in the blanks with the correct words from the word list.
                    </div>
                    
                    <div class="exercise-content">
                        <div class="exercise-text" id="unit2-exercise-text">
                            <strong>Natural Disasters</strong><br><br>
                            
                            - What happens in <span class="blank" id="blank2-1">__________<span class="blank-number">1</span></span>?<br>
                            The ground becomes dry when there is no rain for a long time. This can <span class="blank" id="blank2-2">__________<span class="blank-number">2</span></span> because plants need water to grow.<br><br>
                            
                            - What happens in <span class="blank" id="blank2-3">__________<span class="blank-number">3</span></span>?<br>
                            It occurs when the earth suddenly starts shaking strongly. It can <span class="blank" id="blank2-4">__________<span class="blank-number">4</span></span> and make them fall down in just a few seconds. This can <span class="blank" id="blank2-5">__________<span class="blank-number">5</span></span> if they do not get outside in time.<br><br>
                            
                            - What happens in <span class="blank" id="blank2-6">__________<span class="blank-number">6</span></span>?<br>
                            It often happens after earthquakes or other earth movements under the sea. It brings huge sea waves to the land and can cause damages.<br><br>
                            
                            - What happens in <span class="blank" id="blank2-7">__________<span class="blank-number">7</span></span>?<br>
                            Rocks and earth slide down a hill in this natural disaster. The falling rocks can <span class="blank" id="blank2-8">__________<span class="blank-number">8</span></span> and cause traffic jams.<br><br>
                            
                            - What happens in <span class="blank" id="blank2-9">__________<span class="blank-number">9</span></span>?<br>
                            This is a storm with strong winds. It can <span class="blank" id="blank2-10">__________<span class="blank-number">10</span></span>, so people need to put tapes on them. It can also blow down trees.
                        </div>
                        
                        <div class="word-options-container">
                            <div class="word-options-title">
                                <i class="fas fa-list"></i> Word Options:
                            </div>
                            <div class="word-options" id="unit2-word-options">
                                <!-- Word options will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <div class="exercise-result" id="unit2-result"></div>
                        
                        <div class="exercise-buttons">
                            <button class="exercise-btn" id="unit2-check-btn">
                                <i class="fas fa-check-circle"></i> Check Answers
                            </button>
                            <button class="exercise-btn reset-btn" id="unit2-reset-btn">
                                <i class="fas fa-redo"></i> Reset Exercise
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="voice-selector">
                    <label for="voice-select2"><i class="fas fa-volume-up"></i> Voice:</label>
                    <select id="voice-select2">
                        <option value="">Loading voices...</option>
                    </select>
                </div>
            </div>
            
            <!-- Unit 3 Content -->
            <div class="content-section unit-content" id="unit3-content" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-utensils"></i>
                    Unit 3: Cooking Actions
                </div>
                
                <div class="word-list" id="unit3-word-list">
                    <!-- Word list will be populated by JavaScript -->
                </div>
                
                <div class="exercise-container">
                    <div class="exercise-title">
                        <i class="fas fa-edit"></i>
                        Exercise: Complete the Poem
                    </div>
                    
                    <div class="exercise-instruction">
                        Sandy is writing a poem. Complete the poem by filling in the blanks with the correct cooking verbs from the word list.
                    </div>
                    
                    <div class="exercise-content">
                        <div class="poem-exercise" id="unit3-exercise-text">
                            <strong>I'm a Junior Super Chef!</strong><br>
                            <em>by Sandy Chung</em><br><br>
                            
                            I can <span class="blank" id="blank3-1">__________<span class="blank-number">1</span></span> eggs in a bowl to make breakfast for you.<br>
                            I know how to <span class="blank" id="blank3-2">__________<span class="blank-number">2</span></span> flour and water to make bread too!<br>
                            I can use a knife to <span class="blank" id="blank3-3">__________<span class="blank-number">3</span></span> some meat,<br>
                            And <span class="blank" id="blank3-4">__________<span class="blank-number">4</span></span> it in a bit of oil until it's ready to eat.<br><br>
                            
                            I can <span class="blank" id="blank3-5">__________<span class="blank-number">5</span></span> a fish with ginger and lime.<br>
                            This easy dish can be done in no time.<br>
                            I use my hands to <span class="blank" id="blank3-6">__________<span class="blank-number">6</span></span> the skins off the garlic quickly,<br>
                            And arrange all ingredients on the plate nicely.<br><br>
                            
                            I can <span class="blank" id="blank3-7">__________<span class="blank-number">7</span></span> water to cook pasta for my family.<br>
                            When it's cooking, I <span class="blank" id="blank3-8">__________<span class="blank-number">8</span></span> the pasta sauce carefully.<br>
                            I put everything together and <span class="blank" id="blank3-9">__________<span class="blank-number">9</span></span> some cheese on top.<br>
                            When my family start eating it, they aren't able to stop!<br><br>
                            
                            Watch me <span class="blank" id="blank3-10">__________<span class="blank-number">10</span></span> mixture into a cake tin to make a cake,<br>
                            And then carefully put it into the oven to <span class="blank" id="blank3-11">__________<span class="blank-number">11</span></span>.<br>
                            When it's cool, I <span class="blank" id="blank3-12">__________<span class="blank-number">12</span></span> chocolate icing on it nicely.<br>
                            It's so yummy, but don't eat it too quickly!
                        </div>
                        
                        <div class="word-options-container">
                            <div class="word-options-title">
                                <i class="fas fa-list"></i> Word Options:
                            </div>
                            <div class="word-options" id="unit3-word-options">
                                <!-- Word options will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <div class="exercise-result" id="unit3-result"></div>
                        
                        <div class="exercise-buttons">
                            <button class="exercise-btn" id="unit3-check-btn">
                                <i class="fas fa-check-circle"></i> Check Answers
                            </button>
                            <button class="exercise-btn reset-btn" id="unit3-reset-btn">
                                <i class="fas fa-redo"></i> Reset Exercise
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="voice-selector">
                    <label for="voice-select3"><i class="fas fa-volume-up"></i> Voice:</label>
                    <select id="voice-select3">
                        <option value="">Loading voices...</option>
                    </select>
                </div>
            </div>
            
            <!-- Unit 4 Content - FIXED WITH FILL-IN-THE-BLANKS -->
            <div class="content-section unit-content" id="unit4-content" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-film"></i>
                    Unit 4: Films & Characters
                </div>
                
                <div class="word-list" id="unit4-word-list">
                    <!-- Word list will be populated by JavaScript -->
                </div>
                
                <div class="exercise-container">
                    <div class="exercise-title">
                        <i class="fas fa-edit"></i>
                        Exercise: Complete the Sentences
                    </div>
                    
                    <div class="exercise-instruction">
                        Complete each sentence by filling in the blanks with the correct words from the word list.
                    </div>
                    
                    <div class="exercise-content">
                        <div class="exercise-text" id="unit4-exercise-text">
                            1. My favorite movie is a <span class="blank" id="blank4-1">__________<span class="blank-number">1</span></span> because it makes me laugh so much.<br><br>
                            
                            2. In the <span class="blank" id="blank4-2">__________<span class="blank-number">2</span></span>, the hero fights against many villains to save the city.<br><br>
                            
                            3. Harry Potter is a famous <span class="blank" id="blank4-3">__________<span class="blank-number">3</span></span> about magic and wizards.<br><br>
                            
                            4. I don't like watching <span class="blank" id="blank4-4">__________<span class="blank-number">4</span></span> because they give me nightmares.<br><br>
                            
                            5. Sarah is too <span class="blank" id="blank4-5">__________<span class="blank-number">5</span></span> to speak in front of the whole class.<br><br>
                            
                            6. After moving to a new city, Tom felt very <span class="blank" id="blank4-6">__________<span class="blank-number">6</span></span> without his old friends.<br><br>
                            
                            7. A <span class="blank" id="blank4-7">__________<span class="blank-number">7</span></span> person only thinks about themselves and doesn't help others.<br><br>
                            
                            8. Children are naturally <span class="blank" id="blank4-8">__________<span class="blank-number">8</span></span> and ask many questions about the world around them.
                        </div>
                        
                        <div class="word-options-container">
                            <div class="word-options-title">
                                <i class="fas fa-list"></i> Word Options:
                            </div>
                            <div class="word-options" id="unit4-word-options">
                                <!-- Word options will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <div class="exercise-result" id="unit4-result"></div>
                        
                        <div class="exercise-buttons">
                            <button class="exercise-btn" id="unit4-check-btn">
                                <i class="fas fa-check-circle"></i> Check Answers
                            </button>
                            <button class="exercise-btn reset-btn" id="unit4-reset-btn">
                                <i class="fas fa-redo"></i> Reset Exercise
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="voice-selector">
                    <label for="voice-select4"><i class="fas fa-volume-up"></i> Voice:</label>
                    <select id="voice-select4">
                        <option value="">Loading voices...</option>
                    </select>
                </div>
            </div>
            
            <!-- Unit 5 Content -->
            <div class="content-section unit-content" id="unit5-content" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-suitcase-rolling"></i>
                    Unit 5: Travelling Activities
                </div>
                
                <div class="word-list" id="unit5-word-list">
                    <!-- Word list will be populated by JavaScript -->
                </div>
                
                <div class="exercise-container">
                    <div class="exercise-title">
                        <i class="fas fa-edit"></i>
                        Exercise: Complete the Poem
                    </div>
                    
                    <div class="exercise-instruction">
                        Sophie's class is writing a poem about travelling. Complete the poem by filling in the blanks with the correct travelling activities from the word list.
                    </div>
                    
                    <div class="exercise-content">
                        <div class="poem-exercise" id="unit5-exercise-text">
                            <strong>We want to go travelling!</strong><br><br>
                            
                            I want to go to Australia and <span class="blank" id="blank5-1">__________<span class="blank-number">1</span></span><br>
                            I'll be very careful and keep my hand flat.<br>
                            It may bite my finger and I don't want that!<br><br>
                            
                            I'd like to <span class="blank" id="blank5-2">__________<span class="blank-number">2</span></span> around the world.<br>
                            I want to go to an interesting place and learn all about it.<br>
                            I always take lots of photos so that I can remember my visit.<br><br>
                            
                            I hope I can <span class="blank" id="blank5-3">__________<span class="blank-number">3</span></span><br>
                            Travelling on the ocean on a great big ship<br>
                            Is my idea of the perfect trip!<br><br>
                            
                            I think it's fun to <span class="blank" id="blank5-4">__________<span class="blank-number">4</span></span><br>
                            Feeling the wind in my hair and water splashing in my face.<br>
                            Don't worry, Mum. I'll wear a life jacket just in case!<br><br>
                            
                            My dream is to <span class="blank" id="blank5-5">__________<span class="blank-number">5</span></span> one day.<br>
                            I'll look at the trees reaching into the sky,<br>
                            Listen to the birds and maybe see an amazing butterfly.<br><br>
                            
                            When I go travelling, I always want to <span class="blank" id="blank5-6">__________<span class="blank-number">6</span></span><br>
                            Learning about kings and queens is interesting for me!<br>
                            There's usually a cafe where I can have cakes and tea.<br><br>
                            
                            Oh, how I wish I could <span class="blank" id="blank5-7">__________<span class="blank-number">7</span></span> in winter.<br>
                            It was so much fun going skiing last year.<br>
                            I'm eager to learn a new sport this year.
                        </div>
                        
                        <div class="word-options-container">
                            <div class="word-options-title">
                                <i class="fas fa-list"></i> Word Options:
                            </div>
                            <div class="word-options" id="unit5-word-options">
                                <!-- Word options will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <div class="exercise-result" id="unit5-result"></div>
                        
                        <div class="exercise-buttons">
                            <button class="exercise-btn" id="unit5-check-btn">
                                <i class="fas fa-check-circle"></i> Check Answers
                            </button>
                            <button class="exercise-btn reset-btn" id="unit5-reset-btn">
                                <i class="fas fa-redo"></i> Reset Exercise
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="voice-selector">
                    <label for="voice-select5"><i class="fas fa-volume-up"></i> Voice:</label>
                    <select id="voice-select5">
                        <option value="">Loading voices...</option>
                    </select>
                </div>
            </div>
            
            <!-- Unit 6 Content -->
            <div class="content-section unit-content" id="unit6-content" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-globe-americas"></i>
                    Unit 6: Cultural Activities
                </div>
                
                <div class="word-list" id="unit6-word-list">
                    <!-- Word list will be populated by JavaScript -->
                </div>
                
                <div class="exercise-container">
                    <div class="exercise-title">
                        <i class="fas fa-edit"></i>
                        Exercise: Solve the Riddles
                    </div>
                    
                    <div class="exercise-instruction">
                        It is International Week at school. Mike is solving the riddles on a board display. Click "Show Answer" to reveal the answers to each riddle.
                    </div>
                    
                    <div class="exercise-content">
                        <!-- Riddle 1 -->
                        <div class="riddle-container">
                            <div class="riddle">
                                1. I'm a country in Asia. People often relate me to sushi and origami. Which country am I?
                            </div>
                            <div class="riddle-answer" id="riddle1-answer">Japan</div>
                            <button class="riddle-btn" data-riddle="1">Show Answer</button>
                        </div>
                        
                        <!-- Riddle 2 -->
                        <div class="riddle-container">
                            <div class="riddle">
                                2. I'm an energetic sport on ice. Players chase one another in the ice rink. What am I?
                            </div>
                            <div class="riddle-answer" id="riddle2-answer">Ice hockey</div>
                            <button class="riddle-btn" data-riddle="2">Show Answer</button>
                        </div>
                        
                        <!-- Riddle 3 -->
                        <div class="riddle-container">
                            <div class="riddle">
                                3. I'm a long dress which hugs the body. Ladies in me always walk very elegantly. What am I?
                            </div>
                            <div class="riddle-answer" id="riddle3-answer">Cheongsam</div>
                            <button class="riddle-btn" data-riddle="3">Show Answer</button>
                        </div>
                        
                        <!-- Riddle 4 -->
                        <div class="riddle-container">
                            <div class="riddle">
                                4. I look like a skirt, but I'm not for a lady. I'm often made of woollen cloth with a pretty pattern. What am I?
                            </div>
                            <div class="riddle-answer" id="riddle4-answer">A kilt</div>
                            <button class="riddle-btn" data-riddle="4">Show Answer</button>
                        </div>
                        
                        <!-- Riddle 5 -->
                        <div class="riddle-container">
                            <div class="riddle">
                                5. I'm sour, salty and spicy. Making me and eating me both make people happy. What am I?
                            </div>
                            <div class="riddle-answer" id="riddle5-answer">Kimchi</div>
                            <button class="riddle-btn" data-riddle="5">Show Answer</button>
                        </div>
                        
                        <!-- Riddle 6 -->
                        <div class="riddle-container">
                            <div class="riddle">
                                6. I make people in Venice look mysterious! Carnival-goers use me to make others curious. What am I?
                            </div>
                            <div class="riddle-answer" id="riddle6-answer">A Venetian mask</div>
                            <button class="riddle-btn" data-riddle="6">Show Answer</button>
                        </div>
                        
                        <!-- Riddle 7 -->
                        <div class="riddle-container">
                            <div class="riddle">
                                7. I'm a form of drama in China. Actors and actresses paint their faces before going on stage. What am I?
                            </div>
                            <div class="riddle-answer" id="riddle7-answer">A Chinese opera</div>
                            <button class="riddle-btn" data-riddle="7">Show Answer</button>
                        </div>
                        
                        <div class="exercise-result" id="unit6-result"></div>
                        
                        <div class="exercise-buttons">
                            <button class="exercise-btn" id="unit6-check-btn">
                                <i class="fas fa-check-circle"></i> Mark Unit Complete
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="voice-selector">
                    <label for="voice-select6"><i class="fas fa-volume-up"></i> Voice:</label>
                    <select id="voice-select6">
                        <option value="">Loading voices...</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <div class="footer-text">
                Oxford Living English (6A) - Vocabulary Learning
            </div>
        </div>
    </div>

    <script>
        // Course units data based on the PDF content
        const courseUnits = [
            { 
                id: 1, 
                title: "Charity Work", 
                icon: "fas fa-hands-helping", 
                description: "Vocabulary for charitable activities and volunteer work",
                words: [
                    { word: "visit an elderly home", meaning: "Spend time with old people at a care facility." },
                    { word: "adopt a pet", meaning: "Take an animal from a shelter and give it a home." },
                    { word: "go on a walkathon", meaning: "Participate in a long walk to raise money for charity." },
                    { word: "take part in a fund-raising fair", meaning: "Join an event that collects money for a good cause." },
                    { word: "sell flags", meaning: "Help charities by selling flags on flag days." },
                    { word: "sell raffle tickets", meaning: "Sell tickets for a lottery to raise money." },
                    { word: "donate money", meaning: "Give money to help others or support a cause." },
                    { word: "do voluntary work", meaning: "Work without payment to help people or organizations." }
                ],
                exercise: {
                    type: "fill-blanks",
                    text: "Would you like to give a helping hand? There are a lot of ways to do this! Are you good at talking to people? You can __________ and spend some time with the old people there. Do you love animals? __________ from an animal charity and give it a warm and safe home. Do you enjoy walking? You can __________ to raise money. Do you want to have fun and help people at the same time? You can __________. Some charities hold a flag day every year. You can be a volunteer to help __________. Other charities __________ to raise money. You can buy some to help others. You may even have a chance to win something! You can also __________ to your favourite charity directly. Even just a few dollars can make a difference! There are many different charities which need your help. Reach out and try to __________ for them. You will feel very happy when you help people in need!",
                    answers: [
                        "visit an elderly home",
                        "Adopt a pet",
                        "go on a walkathon",
                        "take part in a fund-raising fair",
                        "sell flags",
                        "sell raffle tickets",
                        "donate money",
                        "do voluntary work"
                    ]
                }
            },
            { 
                id: 2, 
                title: "Natural Disasters", 
                icon: "fas fa-exclamation-triangle", 
                description: "Words for natural disasters and their effects",
                words: [
                    { word: "a drought", meaning: "A long period with little or no rain." },
                    { word: "damage crops", meaning: "Harm plants that are grown for food." },
                    { word: "an earthquake", meaning: "A sudden shaking of the ground." },
                    { word: "destroy buildings", meaning: "Completely ruin structures where people live or work." },
                    { word: "injure people", meaning: "Cause physical harm to persons." },
                    { word: "a tsunami", meaning: "A huge sea wave caused by an underwater earthquake." },
                    { word: "a landslip", meaning: "When rocks and earth slide down a hill." },
                    { word: "block roads", meaning: "Make paths for vehicles impassable." },
                    { word: "a typhoon", meaning: "A tropical storm with very strong winds." },
                    { word: "break windows", meaning: "Cause glass in windows to shatter." }
                ],
                exercise: {
                    type: "fill-blanks",
                    text: "Natural Disasters - What happens in __________? The ground becomes dry when there is no rain for a long time. This can __________ because plants need water to grow. - What happens in __________? It occurs when the earth suddenly starts shaking strongly. It can __________ and make them fall down in just a few seconds. This can __________ if they do not get outside in time. - What happens in __________? It often happens after earthquakes or other earth movements under the sea. It brings huge sea waves to the land and can cause damages. - What happens in __________? Rocks and earth slide down a hill in this natural disaster. The falling rocks can __________ and cause traffic jams. - What happens in __________? This is a storm with strong winds. It can __________, so people need to put tapes on them. It can also blow down trees.",
                    answers: [
                        "a drought",
                        "damage crops",
                        "an earthquake",
                        "destroy buildings",
                        "injure people",
                        "a tsunami",
                        "a landslip",
                        "block roads",
                        "a typhoon",
                        "break windows"
                    ]
                }
            },
            { 
                id: 3, 
                title: "Cooking Actions", 
                icon: "fas fa-utensils", 
                description: "Verbs for food preparation and cooking techniques",
                words: [
                    { word: "beat", meaning: "Mix ingredients quickly with a fork, whisk, or beater." },
                    { word: "mix", meaning: "Combine ingredients together." },
                    { word: "chop", meaning: "Cut food into small pieces with a knife." },
                    { word: "fry", meaning: "Cook food in hot oil or fat." },
                    { word: "steam", meaning: "Cook food using steam from boiling water." },
                    { word: "peel", meaning: "Remove the skin from fruits or vegetables." },
                    { word: "boil", meaning: "Cook food in boiling water." },
                    { word: "stir", meaning: "Mix ingredients with a circular motion." },
                    { word: "sprinkle", meaning: "Scatter small amounts of something over food." },
                    { word: "pour", meaning: "Cause liquid to flow from a container." },
                    { word: "bake", meaning: "Cook food in an oven using dry heat." },
                    { word: "spread", meaning: "Apply a substance in an even layer." }
                ],
                exercise: {
                    type: "fill-blanks",
                    text: "I'm a Junior Super Chef! I can __________ eggs in a bowl to make breakfast for you. I know how to __________ flour and water to make bread too! I can use a knife to __________ some meat, And __________ it in a bit of oil until it's ready to eat. I can __________ a fish with ginger and lime. This easy dish can be done in no time. I use my hands to __________ the skins off the garlic quickly, And arrange all ingredients on the plate nicely. I can __________ water to cook pasta for my family. When it's cooking, I __________ the pasta sauce carefully. I put everything together and __________ some cheese on top. When my family start eating it, they aren't able to stop! Watch me __________ mixture into a cake tin to make a cake, And then carefully put it into the oven to __________. When it's cool, I __________ chocolate icing on it nicely. It's so yummy, but don't eat it too quickly!",
                    answers: [
                        "beat",
                        "mix",
                        "chop",
                        "fry",
                        "steam",
                        "peel",
                        "boil",
                        "stir",
                        "sprinkle",
                        "pour",
                        "bake",
                        "spread"
                    ]
                }
            },
            { 
                id: 4, 
                title: "Films & Characters", 
                icon: "fas fa-film", 
                description: "Types of movies and adjectives for character description",
                words: [
                    { word: "a comedy", meaning: "A funny film that makes people laugh." },
                    { word: "an action film", meaning: "An exciting film with fights, chases, and stunts." },
                    { word: "a fantasy film", meaning: "A film about magical or imaginary worlds." },
                    { word: "a horror film", meaning: "A scary film that frightens people." },
                    { word: "timid", meaning: "Shy and lacking in confidence." },
                    { word: "lonely", meaning: "Sad because one has no friends or company." },
                    { word: "selfish", meaning: "Caring only about oneself." },
                    { word: "curious", meaning: "Eager to know or learn something." }
                ],
                exercise: {
                    type: "fill-blanks",
                    text: "1. My favorite movie is a __________ because it makes me laugh so much. 2. In the __________, the hero fights against many villains to save the city. 3. Harry Potter is a famous __________ about magic and wizards. 4. I don't like watching __________ because they give me nightmares. 5. Sarah is too __________ to speak in front of the whole class. 6. After moving to a new city, Tom felt very __________ without his old friends. 7. A __________ person only thinks about themselves and doesn't help others. 8. Children are naturally __________ and ask many questions about the world around them.",
                    answers: [
                        "comedy",
                        "action film",
                        "fantasy film",
                        "horror film",
                        "timid",
                        "lonely",
                        "selfish",
                        "curious"
                    ]
                }
            },
            { 
                id: 5, 
                title: "Travelling Activities", 
                icon: "fas fa-suitcase-rolling", 
                description: "Activities and experiences while traveling",
                words: [
                    { word: "feed a kangaroo", meaning: "Give food to a kangaroo, often in Australia." },
                    { word: "go sightseeing", meaning: "Visit interesting places as a tourist." },
                    { word: "go on a cruise", meaning: "Take a holiday on a ship that visits different places." },
                    { word: "ride on a banana boat", meaning: "Ride on an inflatable boat pulled by a speedboat." },
                    { word: "go into a rainforest", meaning: "Enter and explore a dense forest with high rainfall." },
                    { word: "visit a palace", meaning: "Tour a large, impressive house where royalty lives or lived." },
                    { word: "go snowboarding", meaning: "Slide down snow-covered slopes on a single board." }
                ],
                exercise: {
                    type: "fill-blanks",
                    text: "We want to go travelling! I want to go to Australia and __________ I'll be very careful and keep my hand flat. It may bite my finger and I don't want that! I'd like to __________ around the world. I want to go to an interesting place and learn all about it. I always take lots of photos so that I can remember my visit. I hope I can __________ Travelling on the ocean on a great big ship Is my idea of the perfect trip! I think it's fun to __________ Feeling the wind in my hair and water splashing in my face. Don't worry, Mum. I'll wear a life jacket just in case! My dream is to __________ one day. I'll look at the trees reaching into the sky, Listen to the birds and maybe see an amazing butterfly. When I go travelling, I always want to __________ Learning about kings and queens is interesting for me! There's usually a cafe where I can have cakes and tea. Oh, how I wish I could __________ in winter. It was so much fun going skiing last year. I'm eager to learn a new sport this year.",
                    answers: [
                        "feed a kangaroo",
                        "go sightseeing",
                        "go on a cruise",
                        "ride on a banana boat",
                        "go into a rainforest",
                        "visit a palace",
                        "go snowboarding"
                    ]
                }
            },
            { 
                id: 6, 
                title: "Cultural Activities", 
                icon: "fas fa-globe-americas", 
                description: "Cultural traditions and activities from around the world",
                words: [
                    { word: "Japan", meaning: "A country in Asia known for sushi and origami." },
                    { word: "ice hockey", meaning: "An energetic sport played on ice." },
                    { word: "cheongsam", meaning: "A long Chinese dress that hugs the body." },
                    { word: "a kilt", meaning: "A skirt-like garment worn by Scottish men." },
                    { word: "kimchi", meaning: "A Korean dish of fermented vegetables, spicy and sour." },
                    { word: "a Venetian mask", meaning: "A mask worn during Venice Carnival." },
                    { word: "a Chinese opera", meaning: "Traditional Chinese drama with painted faces." },
                    { word: "a kimono", meaning: "Traditional Japanese clothing." }
                ],
                exercise: {
                    type: "riddles",
                    riddles: [
                        { question: "I'm a country in Asia. People often relate me to sushi and origami. Which country am I?", answer: "Japan" },
                        { question: "I'm an energetic sport on ice. Players chase one another in the ice rink. What am I?", answer: "Ice hockey" },
                        { question: "I'm a long dress which hugs the body. Ladies in me always walk very elegantly. What am I?", answer: "Cheongsam" },
                        { question: "I look like a skirt, but I'm not for a lady. I'm often made of woollen cloth with a pretty pattern. What am I?", answer: "A kilt" },
                        { question: "I'm sour, salty and spicy. Making me and eating me both make people happy. What am I?", answer: "Kimchi" },
                        { question: "I make people in Venice look mysterious! Carnival-goers use me to make others curious. What am I?", answer: "A Venetian mask" },
                        { question: "I'm a form of drama in China. Actors and actresses paint their faces before going on stage. What am I?", answer: "A Chinese opera" }
                    ]
                }
            }
        ];
        
        // Variables for speech synthesis
        let voices = [];
        let selectedVoice = null;
        
        // Load completion status from localStorage
        let completedUnits = JSON.parse(localStorage.getItem('eslUnitsCompleted')) || [];
        
        // Current active unit
        let currentUnit = 1;
        
        // DOM elements
        const unitButtons = document.querySelectorAll('.unit-btn');
        const unitContents = document.querySelectorAll('.unit-content');
        const progressFill = document.getElementById('progressFill');
        const progressPercentage = document.getElementById('progressPercentage');
        
        // Function to calculate and update progress
        function updateProgress() {
            const totalUnits = courseUnits.length;
            const completedCount = completedUnits.length;
            const percentage = Math.round((completedCount / totalUnits) * 100);
            
            progressFill.style.width = `${percentage}%`;
            progressPercentage.textContent = `${percentage}%`;
            
            // Save to localStorage
            localStorage.setItem('eslUnitsCompleted', JSON.stringify(completedUnits));
            
            // Update unit buttons styling
            unitButtons.forEach(button => {
                const unitId = parseInt(button.getAttribute('data-unit'));
                button.classList.remove('completed', 'active');
                
                if (completedUnits.includes(unitId)) {
                    button.classList.add('completed');
                }
                
                if (unitId === currentUnit) {
                    button.classList.add('active');
                }
            });
        }
        
        // Load available voices
        function loadVoices() {
            voices = speechSynthesis.getVoices();
            
            // Update all voice selectors
            document.querySelectorAll('select[id^="voice-select"]').forEach(select => {
                select.innerHTML = '';
                
                // Add default option
                const defaultOption = document.createElement('option');
                defaultOption.value = 'default';
                defaultOption.textContent = 'Default (British English)';
                select.appendChild(defaultOption);
                
                // Filter for British English voices
                const britishVoices = voices.filter(voice => 
                    voice.lang.startsWith('en-GB') || 
                    voice.name.toLowerCase().includes('british') ||
                    voice.name.toLowerCase().includes('uk')
                );
                
                // Add British voices first
                if (britishVoices.length > 0) {
                    const britishGroup = document.createElement('optgroup');
                    britishGroup.label = 'British English Voices';
                    
                    britishVoices.forEach(voice => {
                        const option = document.createElement('option');
                        option.value = voice.name;
                        option.textContent = `${voice.name} (${voice.lang})`;
                        britishGroup.appendChild(option);
                        
                        // Set as default British voice
                        if (!selectedVoice && voice.lang.startsWith('en-GB')) {
                            selectedVoice = voice;
                            option.selected = true;
                        }
                    });
                    
                    select.appendChild(britishGroup);
                }
                
                // Add other English voices
                const otherEnglishVoices = voices.filter(voice => 
                    voice.lang.startsWith('en-') && 
                    !voice.lang.startsWith('en-GB') &&
                    !britishVoices.includes(voice)
                );
                
                if (otherEnglishVoices.length > 0) {
                    const otherGroup = document.createElement('optgroup');
                    otherGroup.label = 'Other English Voices';
                    
                    otherEnglishVoices.forEach(voice => {
                        const option = document.createElement('option');
                        option.value = voice.name;
                        option.textContent = `${voice.name} (${voice.lang})`;
                        otherGroup.appendChild(option);
                    });
                    
                    select.appendChild(otherGroup);
                }
            });
        }
        
        // Speak a word using Web Speech API
        function speakWord(text) {
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
                
                const utterance = new SpeechSynthesisUtterance(text);
                
                if (selectedVoice) {
                    utterance.voice = selectedVoice;
                } else {
                    // Try to find a British English voice
                    const britishVoice = voices.find(voice => 
                        voice.lang.startsWith('en-GB') || 
                        voice.name.toLowerCase().includes('british')
                    );
                    utterance.voice = britishVoice || voices[0];
                }
                
                utterance.lang = 'en-GB';
                utterance.rate = 0.9;
                utterance.pitch = 1;
                utterance.volume = 1;
                
                speechSynthesis.speak(utterance);
            }
        }
        
        // Function to load unit content
        function loadUnit(unitId) {
            currentUnit = unitId;
            
            // Hide all unit contents
            unitContents.forEach(content => {
                content.style.display = 'none';
            });
            
            // Show current unit content
            document.getElementById(`unit${unitId}-content`).style.display = 'block';
            
            // Load unit data
            const unit = courseUnits.find(u => u.id === unitId);
            
            // Load word list
            const wordListContainer = document.getElementById(`unit${unitId}-word-list`);
            wordListContainer.innerHTML = '';
            
            unit.words.forEach(wordObj => {
                const wordItem = document.createElement('div');
                wordItem.className = 'word-item';
                wordItem.innerHTML = `
                    <div class="word-text">
                        <i class="fas fa-book"></i>
                        ${wordObj.word}
                    </div>
                    <div class="word-meaning">${wordObj.meaning}</div>
                    <div class="word-buttons">
                        <button class="speak-btn" data-word="${wordObj.word}">
                            <i class="fas fa-volume-up"></i> Speak Word
                        </button>
                        <button class="speak-btn sentence-btn" data-sentence="${wordObj.meaning}">
                            <i class="fas fa-comment-alt"></i> Speak Meaning
                        </button>
                    </div>
                `;
                wordListContainer.appendChild(wordItem);
            });
            
            // Add event listeners to speak buttons
            document.querySelectorAll(`#unit${unitId}-word-list .speak-btn[data-word]`).forEach(button => {
                button.addEventListener('click', function() {
                    const word = this.getAttribute('data-word');
                    speakWord(word);
                });
            });
            
            document.querySelectorAll(`#unit${unitId}-word-list .speak-btn[data-sentence]`).forEach(button => {
                button.addEventListener('click', function() {
                    const sentence = this.getAttribute('data-sentence');
                    speakWord(sentence);
                });
            });
            
            // Load exercise based on type
            if (unit.exercise.type === "fill-blanks") {
                loadFillBlanksExercise(unitId, unit);
            } else if (unit.exercise.type === "riddles") {
                loadRiddlesExercise(unitId, unit);
            }
            
            // Update progress display
            updateProgress();
        }
        
        // Function to load fill-in-the-blanks exercise
        function loadFillBlanksExercise(unitId, unit) {
            // Clear any existing event listeners and reset
            const checkBtn = document.getElementById(`unit${unitId}-check-btn`);
            const resetBtn = document.getElementById(`unit${unitId}-reset-btn`);
            const resultDiv = document.getElementById(`unit${unitId}-result`);
            
            // Reset result display
            resultDiv.className = 'exercise-result';
            resultDiv.style.display = 'none';
            resultDiv.textContent = '';
            
            // Load word options
            const wordOptionsContainer = document.getElementById(`unit${unitId}-word-options`);
            wordOptionsContainer.innerHTML = '';
            
            // Shuffle the word options
            const shuffledWords = [...unit.words].sort(() => Math.random() - 0.5);
            
            shuffledWords.forEach(wordObj => {
                const wordOption = document.createElement('div');
                wordOption.className = 'word-option';
                wordOption.textContent = wordObj.word;
                wordOption.setAttribute('data-word', wordObj.word);
                wordOptionsContainer.appendChild(wordOption);
            });
            
            // Add event listeners to word options
            document.querySelectorAll(`#unit${unitId}-word-options .word-option`).forEach(option => {
                option.addEventListener('click', function() {
                    if (this.classList.contains('used')) return;
                    
                    const word = this.getAttribute('data-word');
                    const blanks = document.querySelectorAll(`#unit${unitId}-content .blank:not(.has-answer)`);
                    
                    if (blanks.length > 0) {
                        const firstBlank = blanks[0];
                        firstBlank.textContent = word;
                        firstBlank.classList.add('has-answer');
                        this.classList.add('used');
                        
                        // Check if all blanks are filled
                        checkAllBlanksFilled(unitId);
                    }
                });
            });
            
            // Reset exercise button
            resetBtn.onclick = function() {
                // Reset all blanks
                document.querySelectorAll(`#unit${unitId}-content .blank`).forEach(blank => {
                    blank.textContent = '__________';
                    blank.classList.remove('has-answer');
                });
                
                // Reset word options
                document.querySelectorAll(`#unit${unitId}-word-options .word-option`).forEach(option => {
                    option.classList.remove('used');
                });
                
                // Reset result display
                resultDiv.className = 'exercise-result';
                resultDiv.style.display = 'none';
                resultDiv.textContent = '';
            };
            
            // Check answers button
            checkBtn.onclick = function() {
                checkFillBlanksAnswers(unitId, unit);
            };
        }
        
        // Function to check if all blanks are filled
        function checkAllBlanksFilled(unitId) {
            const blanks = document.querySelectorAll(`#unit${unitId}-content .blank`);
            const allFilled = Array.from(blanks).every(blank => blank.classList.contains('has-answer'));
            
            if (allFilled) {
                // Auto-check answers after a delay
                setTimeout(() => {
                    const unit = courseUnits.find(u => u.id === parseInt(unitId));
                    checkFillBlanksAnswers(unitId, unit);
                }, 500);
            }
        }
        
        // Function to check fill-in-the-blanks answers
        function checkFillBlanksAnswers(unitId, unit) {
            const blanks = document.querySelectorAll(`#unit${unitId}-content .blank`);
            const resultDiv = document.getElementById(`unit${unitId}-result`);
            
            let correctCount = 0;
            const totalBlanks = blanks.length;
            
            blanks.forEach((blank, index) => {
                const userAnswer = blank.textContent.trim().toLowerCase();
                const correctAnswer = unit.exercise.answers[index].toLowerCase();
                
                if (userAnswer === correctAnswer) {
                    correctCount++;
                    blank.style.color = '#2E7D32';
                } else {
                    blank.style.color = '#C62828';
                    blank.innerHTML = `${blank.textContent} <span style="color: #666; font-size: 14px;">(Correct: ${unit.exercise.answers[index]})</span>`;
                }
            });
            
            // Show result
            const percentage = Math.round((correctCount / totalBlanks) * 100);
            resultDiv.className = 'exercise-result';
            resultDiv.style.display = 'block';
            
            if (percentage === 100) {
                resultDiv.classList.add('correct');
                resultDiv.textContent = `Excellent! You got ${correctCount} out of ${totalBlanks} correct! (${percentage}%)`;
                
                // Mark unit as completed if not already
                if (!completedUnits.includes(parseInt(unitId))) {
                    completedUnits.push(parseInt(unitId));
                    updateProgress();
                }
            } else if (percentage >= 70) {
                resultDiv.classList.add('correct');
                resultDiv.textContent = `Good job! You got ${correctCount} out of ${totalBlanks} correct! (${percentage}%)`;
            } else {
                resultDiv.classList.add('incorrect');
                resultDiv.textContent = `You got ${correctCount} out of ${totalBlanks} correct. Try again! (${percentage}%)`;
            }
        }
        
        // Function to load riddles exercise - FIXED VERSION
        function loadRiddlesExercise(unitId, unit) {
            // Set up event listeners for riddle buttons
            document.querySelectorAll(`#unit${unitId}-content .riddle-btn`).forEach(button => {
                // Remove any existing event listeners to prevent duplicates
                const newButton = button.cloneNode(true);
                button.parentNode.replaceChild(newButton, button);
                
                // Add fresh event listener
                newButton.addEventListener('click', function() {
                    const riddleNum = this.getAttribute('data-riddle');
                    const answerDiv = document.getElementById(`riddle${riddleNum}-answer`);
                    
                    // Toggle the 'show' class
                    answerDiv.classList.toggle('show');
                    
                    // Update button text
                    if (answerDiv.classList.contains('show')) {
                        this.textContent = 'Hide Answer';
                        this.style.backgroundColor = '#ff6b6b'; // Change to red when showing answer
                    } else {
                        this.textContent = 'Show Answer';
                        this.style.backgroundColor = ''; // Reset to default
                    }
                });
            });
            
            // Set up the "Mark Unit Complete" button
            const completeBtn = document.getElementById(`unit${unitId}-check-btn`);
            if (completeBtn) {
                completeBtn.onclick = function() {
                    if (!completedUnits.includes(parseInt(unitId))) {
                        completedUnits.push(parseInt(unitId));
                        updateProgress();
                        
                        const resultDiv = document.getElementById(`unit${unitId}-result`);
                        resultDiv.className = 'exercise-result correct';
                        resultDiv.style.display = 'block';
                        resultDiv.textContent = 'Unit marked as complete! Great job solving all the riddles!';
                    }
                };
            }
        }
        
        // Initialize the page
        function initApp() {
            // Set up unit button click events
            unitButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const unitId = parseInt(this.getAttribute('data-unit'));
                    loadUnit(unitId);
                });
            });
            
            // Load voices when they become available
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
            
            // Load voices immediately if they're already available
            if (speechSynthesis.getVoices().length > 0) {
                loadVoices();
            }
            
            // Set up voice selector event listeners (all selectors sync to same selection)
            document.querySelectorAll('select[id^="voice-select"]').forEach(select => {
                select.addEventListener('change', function() {
                    const voiceName = this.value;
                    
                    if (voiceName === 'default') {
                        // Try to find a British English voice
                        selectedVoice = voices.find(voice => 
                            voice.lang.startsWith('en-GB') || 
                            voice.name.toLowerCase().includes('british')
                        ) || voices[0];
                    } else {
                        selectedVoice = voices.find(voice => voice.name === voiceName);
                    }
                    
                    // Sync all other voice selectors
                    document.querySelectorAll('select[id^="voice-select"]').forEach(otherSelect => {
                        if (otherSelect !== this) {
                            otherSelect.value = this.value;
                        }
                    });
                });
            });
            
            // Load first unit by default
            loadUnit(1);
        }
        
        // Initialize the app when page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
